{% extends "finale_base.html" %}
{% load universe_tags %}
{% block title %}Financial Lightweight Editor - {{container.name}} - Valuations{% endblock %}
{% block readyoptions %}
				$(".btn").not('#comment').tooltip();
{% endblock %}
{% block headeroptions %}
	<script>
		var container = {{container_json|safe}};
		var labels = {{labels|get_as_json_string|safe}};
		var complete_fields = {{complete_fields|get_as_json_string|safe}}

	</script>
{% endblock %}
{% block content %}
		<div class="row">
			<div class="col-lg-11">
				<h1 class="">{{ container.name }}
					<div class="btn-group">
						<button class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="caret"/></button>
						<ul class="dropdown-menu" role="menu">
							<li role="presentation" class="dropdown-header">Actions</li>
							<li><a href="/container_delete.html?container_id={{container.id}}&container_type={{container.type.identifier}}">Delete</a></li>
							<li><a href="/container_valuations_compute.html?container_id={{container.id}}&container_type={{container.type.identifier}}">Compute valuations</a></li>
							<li><a href="/container_valuations.html?container_id={{container.id}}&container_type={{container.type.identifier}}">Show valuations</a></li>
							<li role="presentation" class="dropdown-header">Guardian</li>
							<li><a href="/container_external_import.html?container_id={{container.id}}&container_type={{container.type.identifier}}&external=guardian&target=portfolio">Import portfolio information</a></li>
							<li><a href="/container_external_import.html?container_id={{container.id}}&container_type={{container.type.identifier}}&external=guardian&target=transactions">Import transactions</a></li>
							<li role="presentation" class="dropdown-header">Sequoia</li>
							<li><a href="/custom_view.html?container_id={{container.id}}&custom=sequoia&target=map">View MAP/BUD</a></li>
							<li><a href="/custom_edit.html?container_id={{container.id}}&custom=sequoia&target=map">Edit MAP/BUD</a></li>
						</ul>
					</div>
				</h1>
	  			<p class="lead">{% if container.short_description %}{{ container.short_description }}{% else %}No description is available.{% endif %}<br/>
			</div>
		</div>
		<div class="row">&nbsp;</div>
		<div class="row">
			<table class='table col-lg-12'>
				<tr>
					<th rowspan=2>Date</th>
					<th colspan={{currencies|length}}><center>Investments</center></th>
					<th rowspan=2>Actions</th>
					<th colspan={{currencies|length}}><center>Cash</center></th>
					<th rowspan=2>Actions</th>
				</tr>
				<tr>
				{% for currency in currencies %}
					<th>{{currency}}</th>
				{% endfor %}
				{% for currency in currencies %}
					<th>{{currency}}</th>
				{% endfor %}
				</tr>
				{% for key_date in valuations_date %}
					<tr>
					<td>{{key_date}}</td>
					{% for currency in currencies %}
						<td>{{valuations|get_dict_key:key_date|get_dict_key:'invested'|get_dict_key:currency|floatformat:2}}</td>
					{% endfor %}
					<td>
						<a href="/container_positions.html?container_id={{container.id}}&container_type={{container.type.identifier}}&working_date={{key_date}}" class="btn btn-default" role="button" data-placement="bottom" title="View all positions of {{container.name}} as of {{key_date}}">
							<span class="glyphicon glyphicon-list"></span>
						</a>
					</td>
					{% for currency in currencies %}
						<td>{{valuations|get_dict_key:key_date|get_dict_key:'cash'|get_dict_key:currency|floatformat:2}}</td>
					{% endfor %}
					<td>
						<a href="/container_accounts.html?container_id={{container.id}}&container_type={{container.type.identifier}}&working_date={{key_date}}" class="btn btn-default" role="button" data-placement="bottom" title="View all accounts of {{container.name}} as of {{key_date}}">
							<span class="glyphicon glyphicon-list"></span>
						</a>
					</td>
					</tr>
				{% endfor %}
			</table>
		</div>
{% endblock %}